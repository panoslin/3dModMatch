{% extends 'base.html' %}
{% load static %}

{% block title %}é¦–é¡µ - 3Dé‹æ¨¡åŒ¹é…ç³»ç»Ÿ{% endblock %}

{% block extra_css %}
<style>
.hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 80px 0;
}

.feature-card {
    transition: transform 0.3s ease;
    height: 100%;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.stats-card {
    background: linear-gradient(45deg, #f8f9fa, #e9ecef);
    border-left: 4px solid #007bff;
}

.btn-primary-custom {
    background: linear-gradient(45deg, #007bff, #0056b3);
    border: none;
    padding: 12px 30px;
    font-weight: bold;
    border-radius: 25px;
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container text-center">
        <h1 class="display-4 font-weight-bold mb-4">ğŸ¦¶ æ™ºèƒ½3Dé‹æ¨¡åŒ¹é…ç³»ç»Ÿ</h1>
        <p class="lead mb-5">
            è¿ç”¨å…ˆè¿›çš„3Då‡ ä½•åˆ†ææŠ€æœ¯ï¼Œä¸ºæ‚¨çš„é‹æ¨¡æ‰¾åˆ°æœ€ä¼˜çš„ç²—èƒšåŒ¹é…æ–¹æ¡ˆ<br>
            èŠ‚çœææ–™æˆæœ¬ï¼Œæå‡ç”Ÿäº§æ•ˆç‡
        </p>
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="{% url 'core:upload' %}" class="btn btn-primary-custom btn-lg mr-3">
                    ğŸ“ å¼€å§‹ä¸Šä¼ æ–‡ä»¶
                </a>
            </div>
            <div class="col-auto">
                <a href="{% url 'core:matching' %}" class="btn btn-outline-light btn-lg">
                    ğŸ¯ ç«‹å³åŒ¹é…åˆ†æ
                </a>
            </div>
        </div>
    </div>
</section>

<!-- ç»Ÿè®¡æ¦‚è§ˆ -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card stats-card h-100">
                    <div class="card-body text-center">
                        <h2 class="text-primary">{{ shoe_models_count }}</h2>
                        <p class="mb-0">é‹æ¨¡æ–‡ä»¶</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card stats-card h-100">
                    <div class="card-body text-center">
                        <h2 class="text-success">{{ blank_models_count }}</h2>
                        <p class="mb-0">ç²—èƒšæ–‡ä»¶</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card stats-card h-100">
                    <div class="card-body text-center">
                        <h2 class="text-info">{{ total_matches }}</h2>
                        <p class="mb-0">åŒ¹é…ç»“æœ</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card stats-card h-100">
                    <div class="card-body text-center">
                        <h2 class="text-warning">
                            {% if recent_results %}{{ recent_results|length }}{% else %}0{% endif %}
                        </h2>
                        <p class="mb-0">æœ€ä¼˜æ–¹æ¡ˆ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- åŠŸèƒ½ç‰¹è‰² -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="font-weight-bold">ğŸŒŸ ç³»ç»Ÿç‰¹è‰²</h2>
                <p class="text-muted">å…ˆè¿›æŠ€æœ¯ï¼Œç²¾å‡†åŒ¹é…</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card feature-card shadow-sm">
                    <div class="card-body text-center">
                        <div class="text-primary mb-3">
                            <i class="fas fa-cube" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">3Då‡ ä½•åˆ†æ</h5>
                        <p class="card-text text-muted">
                            æ·±åº¦åˆ†æ3Dæ¨¡å‹çš„å‡ ä½•ç‰¹å¾ï¼ŒåŒ…æ‹¬æ›²ç‡åˆ†æã€ä½“ç§¯è®¡ç®—ã€å½¢çŠ¶åŒ¹é…ç­‰
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card shadow-sm">
                    <div class="card-body text-center">
                        <div class="text-success mb-3">
                            <i class="fas fa-chart-line" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">æ™ºèƒ½ä¼˜åŒ–</h5>
                        <p class="card-text text-muted">
                            è‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜åŒ¹é…æ–¹æ¡ˆï¼Œæœ€å¤§åŒ–ææ–™åˆ©ç”¨ç‡ï¼Œæœ€å°åŒ–ç”Ÿäº§æˆæœ¬
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card shadow-sm">
                    <div class="card-body text-center">
                        <div class="text-info mb-3">
                            <i class="fas fa-eye" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">å¯è§†åŒ–å±•ç¤º</h5>
                        <p class="card-text text-muted">
                            ç›´è§‚çš„3Då¯è§†åŒ–ç•Œé¢ï¼Œæ¸…æ™°å±•ç¤ºåŒ¹é…ç»“æœå’Œé‡åˆåº¦åˆ†æ
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- æœ€è¿‘åŒ¹é…ç»“æœ -->
{% if recent_results %}
<section class="py-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="font-weight-bold">ğŸ¯ æœ€è¿‘åŒ¹é…ç»“æœ</h3>
                <p class="text-muted">æœ€æ–°çš„ä¼˜åŒ–åŒ¹é…æ–¹æ¡ˆ</p>
            </div>
        </div>
        
        <div class="row">
            {% for result in recent_results %}
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h6 class="card-title mb-0">
                                {{ result.shoe_model.filename }}
                            </h6>
                            <span class="badge badge-success">æœ€ä¼˜</span>
                        </div>
                        
                        <p class="text-muted small mb-2">
                            <strong>åŒ¹é…ç²—èƒš:</strong> {{ result.blank_model.filename }}
                        </p>
                        
                        <div class="row text-center">
                            <div class="col-6">
                                <small class="text-muted">ææ–™åˆ©ç”¨ç‡</small>
                                <div class="font-weight-bold text-primary">
                                    {{ result.material_utilization|floatformat:1 }}%
                                </div>
                            </div>
                            <div class="col-6">
                                <small class="text-muted">å¹³å‡ä½™é‡</small>
                                <div class="font-weight-bold text-success">
                                    {{ result.average_margin|floatformat:1 }}mm
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <a href="{% url 'core:matching_results' result.id %}" 
                               class="btn btn-outline-primary btn-sm">
                                æŸ¥çœ‹è¯¦æƒ…
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center">
            <a href="{% url 'core:matching' %}" class="btn btn-outline-secondary">
                æŸ¥çœ‹æ‰€æœ‰ç»“æœ â†’
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- å¿«é€Ÿå¼€å§‹ -->
<section class="py-5 bg-primary text-white">
    <div class="container text-center">
        <h3 class="mb-4">ğŸš€ å‡†å¤‡å¼€å§‹ï¼Ÿ</h3>
        <p class="lead mb-4">
            ä¸Šä¼ æ‚¨çš„é‹æ¨¡å’Œç²—èƒšæ–‡ä»¶ï¼Œè®©æˆ‘ä»¬çš„æ™ºèƒ½ç³»ç»Ÿä¸ºæ‚¨æ‰¾åˆ°æœ€ä¼˜åŒ¹é…æ–¹æ¡ˆ
        </p>
        <a href="{% url 'core:upload' %}" class="btn btn-light btn-lg">
            ç«‹å³å¼€å§‹ â†’
        </a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script>
{% endblock %}